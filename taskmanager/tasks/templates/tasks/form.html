{% extends 'tasks/base.html' %}

{% block title %}{{ action }} une tÃ¢che â€” TaskMaster{% endblock %}

{% block content %}

<div class="page-header">
  <h1>
    {% if action == 'Ajouter' %}
      â• <span class="accent">Nouvelle</span> tÃ¢che
    {% else %}
      âœï¸ <span class="accent">Modifier</span> la tÃ¢che
    {% endif %}
  </h1>
</div>

<div class="form-card">
  {% if action == 'Modifier' and tache %}
  <div style="background:var(--creme-fonce); border-radius:8px; padding:.8rem 1rem; margin-bottom:1.8rem; font-size:.85rem; color:var(--texte-doux);">
    ğŸ“… CrÃ©Ã©e le <strong>{{ tache.date_creation|date:"d/m/Y Ã  H:i" }}</strong>
  </div>
  {% endif %}

  <form method="POST">
    {% csrf_token %}

    <!-- Titre -->
    <div class="form-group">
      <label for="{{ form.titre.id_for_label }}">ğŸ“Œ Titre *</label>
      {{ form.titre }}
      {% if form.titre.errors %}
        <p style="color:var(--rouge);font-size:.82rem;margin-top:.3rem;">{{ form.titre.errors.0 }}</p>
      {% endif %}
    </div>

    <!-- Description -->
    <div class="form-group">
      <label for="{{ form.description.id_for_label }}">ğŸ“ Description</label>
      {{ form.description }}
    </div>

    <!-- PrioritÃ© & Statut cÃ´te Ã  cÃ´te -->
    <div style="display:grid; grid-template-columns:1fr 1fr; gap:1rem;">
      <div class="form-group">
        <label for="{{ form.priorite.id_for_label }}">âš¡ PrioritÃ©</label>
        {{ form.priorite }}
      </div>
      <div class="form-group">
        <label for="{{ form.statut.id_for_label }}">ğŸ”– Statut</label>
        {{ form.statut }}
      </div>
    </div>

    <!-- Boutons -->
    <div class="form-actions">
      <a href="{% url 'liste_taches' %}" class="btn-cancel">â† Annuler</a>
      <button type="submit" class="btn-submit">
        {% if action == 'Ajouter' %}âœ… CrÃ©er la tÃ¢che{% else %}ğŸ’¾ Enregistrer{% endif %}
      </button>
    </div>
  </form>
</div>

{% endblock %}